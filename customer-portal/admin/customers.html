<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Customer Management - DecorLite</title>
  <link rel="icon" href="../images/logo.jpg" type="image/x-icon" />

  <link rel="stylesheet" href="../admin/admin.css" />
</head>

<body>
  <header class="main-header">
    <div class="header-logo">DecorLite Admin</div>
    <nav class="nav-links">
      <a href="../html/index.html">Dashboard</a>
      <a href="orders.html">Order Management</a>
      <a href="products.html">Product Management</a>
      <a href="../customer-portal/login.html">Logout</a>
    </nav>
  </header>

  <main class="admin-section">
    <h2>Customers</h2>
    <div class="filters">
      <input type="text" id="search-input" placeholder="Search by name or email">
      <select id="status-filter">
        <option value="all">All</option>
        <option value="active">Active</option>
        <option value="inactive">Inactive</option>
      </select>
    </div>
    <table class="orders-table" id="customersTable">
      <thead>
        <tr>
          <th>Name</th>
          <th>Address</th>
          <th>City</th>
          <th>State</th>
          <th>ZIP</th>
          <th>Phone</th>
          <th>Status</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
      </tbody>
    </table>
  </main>

  <footer>
    <p>&copy; 2025 DecorLite. All rights reserved.</p>
  </footer>

  <script>
    function getCustomers() {
      return JSON.parse(localStorage.getItem("customers")) || [];
    }

    function renderCustomers() {
      const customers = getCustomers();
      const tbody = document.querySelector("#customersTable tbody");
      tbody.innerHTML = "";
      customers.forEach((cust, i) => {
        const tr = document.createElement("tr");
        tr.innerHTML = `
          <td>${cust.name}</td>
          <td>${cust.address}</td>
          <td>${cust.city}</td>
          <td>${cust.state}</td>
          <td>${cust.zip}</td>
          <td>${cust.phone}</td>
          <td>${cust.status || "Active"}</td>
          <td>
            <button onclick="viewCustomer(${i})">View</button>
            <button onclick="deleteCustomer(${i})">Delete</button>
          </td>
        `;
        tbody.appendChild(tr);
      });
    }

    function viewCustomer(index) {
      const cust = getCustomers()[index];
      alert(`Customer Info:\n\nName: ${cust.name}\nAddress: ${cust.address}, ${cust.city}, ${cust.state}, ${cust.zip}\nPhone: ${cust.phone}`);
    }

    function deleteCustomer(index) {
      if (confirm("Are you sure you want to delete this customer?")) {
        const customers = getCustomers();
        customers.splice(index, 1);
        localStorage.setItem("customers", JSON.stringify(customers));
        renderCustomers();
      }
    }

    document.getElementById("search-input").addEventListener("input", function () {
      const search = this.value.toLowerCase();
      const rows = document.querySelectorAll("#customersTable tbody tr");
      rows.forEach(row => {
        const name = row.children[0].textContent.toLowerCase();
        row.style.display = name.includes(search) ? "" : "none";
      });
    });



    renderCustomers();
  </script>
</body>

</html>